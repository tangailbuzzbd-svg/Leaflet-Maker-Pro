
<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet Maker - Professional Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Noto+Sans+Bengali:wght@400;700&family=Anek+Bangla:wght@400;700&family=Tiro+Bangla&family=Galada&family=Noto+Sans+Arabic:wght@400;700&family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --selected-font: 'Hind Siliguri', sans-serif;
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Leaflet Page Styling */
        .page {
            font-family: var(--selected-font);
            width: 297mm;
            height: 210mm;
            padding: 10mm;
            background: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            box-sizing: border-box;
            border: 1px solid #ddd;
        }

        /* Side Preview Logic */
        .preview-container {
            width: 100%;
            height: 550px;
            background: #cbd5e1;
            overflow: hidden; /* Prevent scrolls during auto-fit */
            border-radius: 12px;
            border: 2px solid #94a3b8;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
        }

        #preview-scaler {
            transform-origin: center center;
            transition: transform 0.2s ease-out;
            flex-shrink: 0;
        }

        /* Print Media Queries */
        @media print {
            body { 
                background: white !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            .no-print { 
                display: none !important; 
            }
            #print-area {
                display: block !important;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
            .page {
                border: none !important;
                margin: 0 !important;
                width: 297mm !important;
                height: 210mm !important;
                transform: scale(1) !important;
                box-shadow: none !important;
            }
            @page {
                size: A4 landscape;
                margin: 0;
            }
        }

        /* Screen view for the hidden print area copy */
        #print-area {
            display: none;
        }

        /* Main structure for screen to show the page inside the UI */
        .screen-view .page {
            /* Inherits shared .page styles */
        }

        .main-text {
            font-size: 80px;
            line-height: 1.2;
            font-weight: 700;
            margin: 15px 0;
        }

        .sub-text {
            font-size: 36px;
            font-weight: 600;
        }

        .contact-text {
            font-size: 42px;
            font-weight: 700;
            margin-top: 20px;
        }

        .floating-print {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .color-input {
            -webkit-appearance: none;
            width: 28px;
            height: 28px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
        }
        .color-input::-webkit-color-swatch { border-radius: 50%; border: 1px solid #ddd; }
    </style>
</head>
<body class="screen-view">

    <!-- Floating Print Button -->
    <button onclick="window.print()" class="no-print floating-print bg-green-600 text-white p-4 rounded-full shadow-2xl flex items-center justify-center gap-2 hover:bg-green-700 transition transform hover:scale-110">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>
        <span class="font-bold">Print</span>
    </button>

    <div class="no-print p-4">
        <div class="max-w-7xl mx-auto">
            <!-- Header Section -->
            <div class="flex flex-col lg:flex-row justify-between items-center mb-6 bg-white p-4 rounded-xl shadow-sm gap-4 border-b-4 border-blue-600">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 p-2 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="text-white w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                    </div>
                    <h1 class="text-xl font-bold text-gray-800">Leaflet Maker Pro</h1>
                </div>
                
                <div class="flex flex-wrap items-center gap-4">
                    <div class="flex items-center gap-2">
                        <label class="font-bold text-gray-600 text-xs uppercase tracking-wider">Font:</label>
                        <select id="font-select" onchange="changeFont(this.value)" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg p-2 font-semibold">
                            <option value="'Hind Siliguri', sans-serif">Hind Siliguri</option>
                            <option value="'Noto Sans Bengali', sans-serif">Noto Sans</option>
                            <option value="'Anek Bangla', sans-serif">Anek Bangla</option>
                            <option value="'Tiro Bangla', serif">Tiro Bangla</option>
                            <option value="'Galada', cursive">Galada</option>
                        </select>
                    </div>

                    <div class="flex items-center gap-2">
                        <label class="font-bold text-gray-600 text-xs uppercase tracking-wider">Language:</label>
                        <select id="lang-select" onchange="changeLanguage(this.value)" class="bg-blue-50 border border-blue-300 text-blue-900 text-sm rounded-lg p-2 font-bold">
                            <option value="bn">Bengali (বাংলা)</option>
                            <option value="en">English</option>
                            <option value="hi">Hindi (हिन्दी)</option>
                            <option value="ur">Urdu (اردو)</option>
                            <option value="ar">Arabic (العربية)</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-start">
                <!-- Left Column: Editor -->
                <div class="bg-white p-6 rounded-xl shadow-lg h-[600px] overflow-y-auto border border-gray-200">
                    <h2 id="panel-title" class="text-lg font-bold mb-6 text-gray-700 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                        Edit Information
                    </h2>
                    
                    <div class="space-y-6">
                        <!-- Tagline -->
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-100 shadow-sm">
                            <div class="flex justify-between items-center mb-3">
                                <label class="text-sm font-bold text-gray-600 uppercase" id="lbl-tagline">Tagline</label>
                                <input type="color" id="clr-tagline" value="#1f2937" class="color-input">
                            </div>
                            <input type="text" id="in-tagline" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 transition mb-3 outline-none">
                            <input type="range" id="size-tagline" min="10" max="80" value="36" class="w-full accent-blue-600">
                        </div>
                        
                        <!-- Main Heading -->
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-100 shadow-sm">
                            <div class="flex justify-between items-center mb-3">
                                <label class="text-sm font-bold text-gray-600 uppercase" id="lbl-main">Main Heading</label>
                                <input type="color" id="clr-main" value="#000000" class="color-input">
                            </div>
                            <textarea id="in-main" rows="2" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-red-500 transition mb-3 outline-none"></textarea>
                            <input type="range" id="size-main" min="20" max="180" value="80" class="w-full accent-red-600">
                        </div>
                        
                        <!-- Location -->
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-100 shadow-sm">
                            <div class="flex justify-between items-center mb-3">
                                <label class="text-sm font-bold text-gray-600 uppercase" id="lbl-location">Location</label>
                                <input type="color" id="clr-location" value="#1f2937" class="color-input">
                            </div>
                            <input type="text" id="in-location" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-green-500 transition mb-3 outline-none">
                            <input type="range" id="size-location" min="10" max="100" value="36" class="w-full accent-green-600">
                        </div>
                        
                        <!-- Contact -->
                        <div class="p-4 bg-gray-50 rounded-xl border border-gray-100 shadow-sm">
                            <div class="flex justify-between items-center mb-3">
                                <label class="text-sm font-bold text-gray-600 uppercase" id="lbl-contact">Contact</label>
                                <input type="color" id="clr-contact" value="#000000" class="color-input">
                            </div>
                            <input type="text" id="in-contact" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-orange-500 transition mb-3 outline-none">
                            <input type="range" id="size-contact" min="10" max="100" value="42" class="w-full accent-orange-600">
                        </div>
                    </div>
                </div>

                <!-- Right Column: Live Preview Area -->
                <div class="flex flex-col h-[600px]">
                    <h2 class="text-lg font-bold mb-4 text-gray-700 flex items-center justify-between">
                        <span class="flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                            Live Leaflet Preview (Side)
                        </span>
                        <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">Auto-Fit Page</span>
                    </h2>
                    
                    <div id="preview-container" class="preview-container">
                        <div id="preview-scaler">
                            <!-- Leaflet Content (Screen Preview) -->
                            <div id="leaflet-page" class="page">
                                <div id="out-tagline" class="sub-text"></div>
                                <div id="out-main" class="main-text"></div>
                                <div id="out-location" class="sub-text mt-4"></div>
                                <div id="out-contact-container" class="contact-text">
                                    <span id="contact-label">যোগাযোগ:</span> <span id="out-contact"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-4 bg-white rounded-xl border border-gray-200 shadow-sm">
                        <p class="text-xs font-bold text-red-600 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                            প্রিন্ট গাইড: Margins: 'None' এবং Layout: 'Landscape' সিলেক্ট করুন।
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Separate Print Area (Hidden on screen) -->
    <div id="print-area">
        <!-- Leaflet will be cloned here during print or just mirrored -->
    </div>

    <script>
        let currentLang = 'bn';
        const numberMap = { '0': '০', '1': '১', '2': '২', '3': '৩', '4': '৪', '5': '৫', '6': '৬', '7': '৭', '8': '৮', '9': '৯' };

        const uiText = {
            bn: { panel: "এডিট ও ফন্ট সেটআপ", lblTag: "Tagline (উপরের লেখা)", lblMain: "Main Heading (মূল লেখা)", lblLoc: "Location (ঠিকানা)", lblCon: "Contact (নম্বর দিন)", contactLbl: "যোগাযোগ:", defaultTag: "সুন্দর ও মনোরম পরিবেশে", defaultMain: "5 টি সিট ভাড়া\nদেওয়া হবে।", defaultLoc: "আকুব মেডিকেল এর সাথে", rtl: false },
            en: { panel: "Edit & Font Setup", lblTag: "Tagline", lblMain: "Main Heading", lblLoc: "Location", lblCon: "Contact Number", contactLbl: "Contact:", defaultTag: "In a beautiful environment", defaultMain: "5 Seats Available\nFor Rent", defaultLoc: "Beside Akub Medical", rtl: false },
            hi: { panel: "संपादन और फ़ॉन्ट", lblTag: "टैगलाइन", lblMain: "मुख्य शीर्षक", lblLoc: "स्थान", lblCon: "संपर्क नंबर", contactLbl: "संपर्क:", defaultTag: "सुंदर वातावरण में", defaultMain: "5 सीटें उपलब्ध हैं", defaultLoc: "अकूब मेडिकल के पास", rtl: false },
            ur: { panel: "ترمیم اور فانٹ", lblTag: "ٹیگ لائن", lblMain: "مرکزی سرخی", lblLoc: "مقام", lblCon: "رابطہ نمبر", contactLbl: "رابطہ:", defaultTag: "خوبصورت ماحول میں", defaultMain: "5 نشستیں دستیاب ہیں", defaultLoc: "اکوب میڈیکل کے پاس", rtl: true },
            ar: { panel: "تعديل الخط", lblTag: "الشعار", lblMain: "العنوان الرئيسي", lblLoc: "الموقع", lblCon: "رقم الاتصال", contactLbl: "اتصال:", defaultTag: "في بيئة جميلة", defaultMain: "5 مقاعد متاحة", defaultLoc: "بجانب أكوب ميديكال", rtl: true }
        };

        const config = [
            { inputId: 'in-tagline', outputId: 'out-tagline', clrId: 'clr-tagline', sizeId: 'size-tagline' },
            { inputId: 'in-main', outputId: 'out-main', clrId: 'clr-main', sizeId: 'size-main' },
            { inputId: 'in-location', outputId: 'out-location', clrId: 'clr-location', sizeId: 'size-location' },
            { inputId: 'in-contact', outputId: 'out-contact-container', clrId: 'clr-contact', sizeId: 'size-contact' }
        ];

        // --- Logic for Auto-Fitting Page to Sidebar ---
        function fitPreview() {
            const container = document.getElementById('preview-container');
            const scaler = document.getElementById('preview-scaler');
            if (!container || !scaler) return;

            const cWidth = container.clientWidth - 40; // Subtract padding
            const cHeight = container.clientHeight - 40;
            const pWidth = 1122.52; // 297mm in pixels (96dpi)
            const pHeight = 793.70; // 210mm in pixels (96dpi)

            const scaleX = cWidth / pWidth;
            const scaleY = cHeight / pHeight;
            const finalScale = Math.min(scaleX, scaleY, 1); // Fit within container, max 1x

            scaler.style.transform = `scale(${finalScale})`;
        }

        const resizeObserver = new ResizeObserver(entries => {
            fitPreview();
        });

        // --- Standard UI Functions ---
        function changeFont(fontFamily) {
            document.documentElement.style.setProperty('--selected-font', fontFamily);
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const t = uiText[lang];
            const panelTitle = document.getElementById('panel-title');
            if (panelTitle) panelTitle.innerText = t.panel;
            
            document.getElementById('lbl-tagline').innerText = t.lblTag;
            document.getElementById('lbl-main').innerText = t.lblMain;
            document.getElementById('lbl-location').innerText = t.lblLoc;
            document.getElementById('lbl-contact').innerText = t.lblCon;

            document.getElementById('in-tagline').value = t.defaultTag;
            document.getElementById('in-main').value = t.defaultMain;
            document.getElementById('in-location').value = t.defaultLoc;
            document.getElementById('leaflet-page').style.direction = t.rtl ? 'rtl' : 'ltr';
            updatePreview();
        }

        function updatePreview() {
            config.forEach(item => {
                const input = document.getElementById(item.inputId);
                const output = document.getElementById(item.outputId);
                const colorPicker = document.getElementById(item.clrId);
                const slider = document.getElementById(item.sizeId);
                if (!input || !output) return;

                let val = input.value;
                if (currentLang === 'bn') val = val.replace(/[0-9]/g, s => numberMap[s]);
                if (item.inputId === 'in-contact') document.getElementById('out-contact').innerText = val;
                else output.innerHTML = val.replace(/\n/g, '<br>');
                output.style.color = colorPicker.value;
                output.style.fontSize = slider.value + 'px';
            });
            document.getElementById('contact-label').innerText = uiText[currentLang].contactLbl;
        }

        // --- Handling Print Logic Fix ---
        window.onbeforeprint = () => {
            // Mirror the leaflet-page into the print area for the print process
            const leaflet = document.getElementById('leaflet-page');
            const printArea = document.getElementById('print-area');
            printArea.innerHTML = '';
            const clone = leaflet.cloneNode(true);
            clone.style.transform = "none"; // Reset any UI scaling
            printArea.appendChild(clone);
        };

        config.forEach(item => {
            const input = document.getElementById(item.inputId);
            const clr = document.getElementById(item.clrId);
            const size = document.getElementById(item.sizeId);
            if (input) input.addEventListener('input', updatePreview);
            if (clr) clr.addEventListener('input', updatePreview);
            if (size) size.addEventListener('input', updatePreview);
        });

        window.onload = () => {
            const contactInput = document.getElementById('in-contact');
            if (contactInput) contactInput.value = "0571655898 / 0530518037";
            changeLanguage('bn');
            
            const container = document.getElementById('preview-container');
            if (container) resizeObserver.observe(container);
            fitPreview();
        };

        window.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
        });
    </script>
</body>
</html>
